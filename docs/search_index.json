[
["index.html", "Business-oriented Typology and Characterization of Agriculture in SSA Background", " Business-oriented Typology and Characterization of Agriculture in SSA Melanie Bacou for BMGF Last updated on 2017-05-12 – DRAFT, DO NOT USE OR CITE Background ##################################################################################### # Helper - Construct data codebook summaryTable &lt;- function(dt) { dt.lbl &lt;- data.table( varCode=names(dt), varLabel=attr(dt, &quot;var.labels&quot;) ) tmp &lt;- as.data.table(summary(dt)) tmp[, V1 := 1:7] tmp &lt;- dcast(tmp, V2~V1) setnames(tmp, c(&quot;varCode&quot;, &quot;Min.&quot;, &quot;1st Qu.&quot;, &quot;Median&quot;, &quot;Mean&quot;, &quot;3rd Qu.&quot;, &quot;Max.&quot;, &quot;NA&#39;s&quot;)) tmp[, varCode := str_trim(varCode)] setkey(tmp, varCode) setkey(dt.lbl, varCode) dt.lbl &lt;- tmp[dt.lbl] dt.lbl &lt;- dt.lbl[names(dt)] dt.lbl[, `Hist.` := sapply(dt, function(x) ifelse(class(x)==&quot;numeric&quot;, toJSON(list(values=hist(x, plot=FALSE)$counts)), toJSON(NA)))] setcolorder(dt.lbl, c(1,9,10,2:8)) return(dt.lbl) } ##################################################################################### # Helper - Combine and format results from survey::svyby() svyCrossTab &lt;- function(formula, by, design, quantiles=c(.25,.5,.75), labels=NULL) { # Pass a list of formulas (list(~var1, ~var2, ...)) # Then use tables::tabular() to format nested tables require(survey) require(data.table) require(stringr) # Reshape means x &lt;- lapply(formula, function(x) { m &lt;- svyby(x, by, design, svymean, na.rm=TRUE) m &lt;- as.data.table(ftable(m)) return(m) }) x &lt;- rbindlist(x) setnames(x, c(&quot;by&quot;, &quot;stat&quot;, &quot;var&quot;, &quot;Mean&quot;)) x[stat==&quot;svymean&quot;, stat := &quot;est.&quot;] x[stat==&quot;SE&quot;, stat := &quot;std. err.&quot;] # Reshape quantiles y &lt;- lapply(formula, function(x) { m &lt;- svyby(x, by, design, svyquantile, quantiles, ci=TRUE, na.rm=TRUE) m &lt;- as.data.table(ftable(m)) m[, var := as.character(x)[2]] return(m) }) y &lt;- rbindlist(y) setnames(y, c(&quot;by&quot;, &quot;stat&quot;, &quot;qtl&quot;, &quot;value&quot;, &quot;var&quot;)) y[stat==&quot;svyquantile&quot;, stat := &quot;est.&quot;] y[stat==&quot;SE&quot;, stat := &quot;std. err.&quot;] y[, qtl := paste0(&quot;Q&quot;, as.numeric(as.character(qtl))*100)] y &lt;- dcast(var+by+stat~qtl, data=y) setkey(x, var, by, stat) setkey(y, var, by, stat) x &lt;- x[y] # Add optional labels if(!missing(labels)) for (i in seq_along(var)) x[var==as.character(formula[[i]])[2], var := labels[i]] var.levels &lt;- sapply(formula, function(x) as.character(x)[2]) var.levels &lt;- str_replace(var.levels, fixed(&quot;I(&quot;), fixed(&quot;(&quot;)) x[, var := factor(str_replace(var, fixed(&quot;I(&quot;), fixed(&quot;(&quot;)), levels=var.levels)] x[, stat := factor(as.character(stat), ordered=T)] setcolorder(x, c(3,1,2,4:ncol(x))) setnames(x, 1:3, c(&quot;Variable&quot;, &quot;By&quot;, &quot;Stat&quot;)) return(x) } ##################################################################################### # Helper - Combine multiple svyhist(), svysmooth(), and svycdf() plots svyCrossPlot &lt;- function(formula, design, breaks=&quot;Sturges&quot;, bandwidth=NULL, ...) { require(survey) n &lt;- levels(ghs$class9) par(mfrow=c(length(n), 2)) for (i in n) { svyhist(formula, subset(design, class9==i), breaks=breaks, ylab=&quot;Density&quot;, main=i, ...) lines(svysmooth(formula, subset(design, class9==i), bandwidth=bandwidth), lwd=1, col=40) plot(svycdf(formula, subset(design, class9==i)), ylab=&quot;Est. CDF&quot;, main=i, ...) abline(h=0.5, lty=2, col=40) abline(h=0, lty=2, col=&quot;grey70&quot;) abline(h=1, lty=2, col=&quot;grey70&quot;) } } This study is a prospective chapter in AGRA Africa Agriculture Status Report (AASR) 2017. The overall objective of the AASR report is to (Hazell, 2017): provide an overview of the smallholder farmers and how they have adapted to the challenges they face as economic actors; explore innovative strategies that can substantially raise the productivity and incomes of smallholder farmers; identify policies and programs that can support the movement of Africa’s farming systems from subsistence-oriented to market-oriented thriving businesses; identify the necessary conditions, appropriate technologies, and institutions that can propel and support smallholder agriculture businesses; examine the past and the present role of public and private sector investment in agriculture and the success factors that can be scaled up to accelerate transformation. References "],
["method.html", "1 Method", " 1 Method The study should provide a context-setting chapter that attempts to characterize, scale, locate, point to prioritization of high-level smallholder commercialization strategies, opportunities and challenges. A proposed approach is to chracterize SHFs and frame business strategies within a 2-by-2 domain framework (low/high rainfed ag potential across low/high market access areas). This approach assumes that agricultural development and adaptation strategies are largely driven by pre-existing bio-physical and spatial conditions. We propose then focusing on around half a dozen countries for which we have recent/accessible microdata (e.g. LSMS-ISA and maybe AGRA baseline surveys) to look more closely, in the same 2x2 domain framework, at specific farm household and macro characteristics to do two things: Apply some typology to distinguish between say “predominantly-subsistence” focused and “transitioning-commercial” smallholders Report on hh level variables that can provide insight into the scale of potential business development challenges and opportunities in each country. Fig. Suggested Approach Key farm and household-level variables to look at may include: Holding size Income/consumption Access to inputs/extension Use of inputs Land tenure status Education Cell-phone ownership Cooperative/self-help group membership Access to credit, insurance Off-farm income … "],
["supporting-datasets.html", "2 Supporting Datasets 2.1 Cross-Country Harmonized Variables 2.2 Demographic and Health Surveys (harmonized) 2.3 Other Country-Level Panel Variables", " 2 Supporting Datasets Many (unpublished and mostly country-level) studies have attempted to derive farmer characteristics and farm typologies across geospatial dimensions (see e.g. refs below). IFPRI in particular generated cross-country comparable household variables (derived from World Bank LSMS-ISA panels, Demographic and Health Surveys, and/or other large-scale household surveys and agricultural census). library(data.table) library(survey) library(pander) library(tables) library(stringr) setwd(&quot;~/Projects/2017-agra-aasr&quot;) load(&quot;./tmp/2017-agra-aasr.RData&quot;) # Load dataset #1 (variables extracted for the Poverty, Land, Climate paper) hh1 &lt;- read.dta(&quot;./tmp/Final_SSA_hhPOV_ 6 Apr 2016.12.dta&quot;) hh.dim &lt;- list(hh1=dim(hh1)) # Show summaries hh1.lbl &lt;- summaryTable(hh1) hh1 &lt;- data.table(hh1) # List surveys/years included in this set dt1.sum &lt;- hh1[, .( Regions=uniqueN(svyL1Cd), Districts=uniqueN(paste(svyL1Cd, svyL2Cd)), Obs=.N), keyby=.(ISO3, Year=as.integer(year))] dt1sum &lt;- rhandsontable(dt1.sum, rowHeaders=NULL, height=600, width=&quot;auto&quot;) rm(hh1) # Describe variables dt1var &lt;- rhandsontable(hh1.lbl, rowHeaders=NULL, height=600, width=&quot;auto&quot;) %&gt;% hot_col(&quot;Hist.&quot;, renderer=htmlwidgets::JS(&quot;renderSparkline&quot;)) %&gt;% hot_cols(fixedColumnsLeft=1) # Load dataset #2 (HarvestChoice Ag Snapshots) hh2 &lt;- read.dta(&quot;./tmp/Combined_Regdemovars13.12.dta&quot;) hh.dim$hh2 &lt;- dim(hh2) # Summarize hh2.lbl &lt;- summaryTable(hh2) hh2 &lt;- data.table(hh2) # List surveys/years included in this set dt2.sum &lt;- hh2[, .( Regions=uniqueN(svyL1Cd), Obs=.N), keyby=.(ISO3, Year=as.integer(year))] dt2sum &lt;- rhandsontable(dt2.sum, rowHeaders=NULL, height=600, width=&quot;auto&quot;) rm(hh2) # Describe variables dt2var &lt;- rhandsontable(hh2.lbl, rowHeaders=NULL, height=600, width=&quot;auto&quot;) %&gt;% hot_col(&quot;Hist.&quot;, renderer=htmlwidgets::JS(&quot;renderSparkline&quot;)) %&gt;% hot_cols(fixedColumnsLeft=1) # Load dataset #3 (Beliyou&#39;s Resilience Study) hh3 &lt;- read.dta(&quot;./tmp/Combined_4_Mel.12.dta&quot;) hh.dim$hh3 &lt;- dim(hh3) # Summarize hh3.lbl &lt;- summaryTable(hh3) hh3 &lt;- data.table(hh3) # List surveys/years included in this set dt3.sum &lt;- hh3[, .( Regions=uniqueN(region), Districts=uniqueN(paste(region, district)), Obs=.N), keyby=.(ISO3, Year=as.integer(year), round)] dt3sum &lt;- rhandsontable(dt3.sum, rowHeaders=NULL, height=600, width=&quot;auto&quot;) rm(hh3) # Describe variables dt3var &lt;- rhandsontable(hh3.lbl[1:150], rowHeaders=NULL, height=600, width=&quot;auto&quot;) %&gt;% hot_col(&quot;Hist.&quot;, renderer=htmlwidgets::JS(&quot;renderSparkline&quot;)) %&gt;% hot_cols(fixedColumnsLeft=1) # Load dataset #4 (SSA Poverty) hh4 &lt;- read.dta(&quot;./tmp/SSApoverty_Dist_forGWR.12.dta&quot;) hh.dim$hh4 &lt;- dim(hh4) # Keep labels hh4.lbl &lt;- data.table(varCode=names(hh4), varLabel=attr(hh4, &quot;var.labels&quot;)) # Remove dummy vars hh4 &lt;- hh4[, !names(hh4) %like% &quot;ctry&quot;] hh4 &lt;- hh4[, !names(hh4) %like% &quot;yr&quot;] hh4 &lt;- hh4[, !names(hh4) %like% &quot;fs&quot;] setkey(hh4.lbl, varCode) hh4.lbl &lt;- hh4.lbl[names(hh4)] attr(hh4, &quot;var.labels&quot;) &lt;- hh4.lbl$varLabel # Correct types for (i in names(hh4)) if (class(hh4[[i]])==&quot;numeric&quot;) hist(hh4[[i]], plot=F) hh4[[i]] &lt;- as.character(hh4[[i]]) # Summarize hh4.lbl &lt;- summaryTable(hh4) hh4 &lt;- data.table(hh4) # List surveys/years included in this set dt4.sum &lt;- hh4[, .( Regions=uniqueN(svyL1Cd), Districts=uniqueN(paste(svyL1Cd, svyL2Cd)), Obs=.N), keyby=.(ISO3, Year=as.integer(year))] dt4sum &lt;- rhandsontable(dt4.sum, rowHeaders=NULL, height=600, width=&quot;auto&quot;) rm(hh4) # Describe variables dt4var &lt;- rhandsontable(hh4.lbl, rowHeaders=NULL, height=600, width=&quot;auto&quot;) %&gt;% hot_col(&quot;Hist.&quot;, renderer=htmlwidgets::JS(&quot;renderSparkline&quot;)) %&gt;% hot_cols(fixedColumnsLeft=1) # Load GHA GLSS rounds (Eduardo) 2.1 Cross-Country Harmonized Variables Inventory and summarize the latest versions of IFPRI’s harmonized variables. Some of these variables are also available (summarized) across districts and/or regions and/or gender. 2.1.1 Dataset #1 (Poverty, Land, Climate paper) This dataset contains 395 variables and 220460 observations. The breakdown across countries and survey years is as follows, and variables are further described in the next table. Many of these variables are also documented in Azzarri, Signorelli, &amp; Bacou (2016). dt1sum dt1var 2.1.2 Dataset #2 (HarvestChoice Agricultural Snapshots) My copy of the household-level file is corrupt (would need to contact IFPRI directly) but the variables are similar in the region-level file. This dataset contains 86 variables. The breakdown across countries and survey years is as follows, and variables are further described in the next table. dt2sum dt2var 2.1.3 Dataset #3 (Panels for Resilience Study) This dataset contains 2670 variables and 101333 observations. The breakdown across countries and survey years is as follows, and variables are further described in the next table. dt3sum This dataset also includes over 2,000 constructed climatic variables (monthly SPEI, temperature, rainfall, PDSI, etc.). To save space they are not shown in the variable summary below. dt3var 2.1.4 Dataset #4 (SSA Poverty Regressions) This dataset contains 350 variables and 1650 observations. The breakdown across countries and survey years is as follows, and variables are further described in the next table. This is a district-level dataset (IFPRI holds the hh-level variables). dt4sum dt4var 2.2 Demographic and Health Surveys (harmonized) IFPRI holds cross-country harmonized variables from the latest DHS. Complete metadata is in a DHS Google Sheet. We would need to request access to the CHILD and WOMAN recodes, I only have the STRATA summaries. 2.3 Other Country-Level Panel Variables 2.3.1 Ghana GLSS Rounds (as needed). IFPRI/DSG holds 3 rounds (2005, 2008, 2012) of harmonized variables focused on wages and productivity trends. 2.3.2 Nigeria Farm Segmentation Study (as needed, used in the typology below) References "],
["typology-of-farm-holdings.html", "3 Typology of Farm Holdings 3.1 Nigeria 3.2 Ethiopia", " 3 Typology of Farm Holdings This section is an exploration of smallholdings and smallholder farmers (definition and characteristics) in Nigeria and Ethiopia. 3.1 Nigeria Revelant sources of household-level micro records for Nigeria include: 2010 and 2012 Nigeria General Household Survey Panels DfID’s sponsored agricultural survey (1,300 hhlds) (contact Abt Associates) Fadama III 2009 Baseline and 2012 Midline Surveys and FADAMA’s Agricultural Production Surveys (APS) (still not publicly available, see e.g. (Girei, Saingbe, Bitrus, &amp; Bassey, 2017)) ##################################################################################### # Load and copy constructed vars from the 2016 NGA Segmentation (GHS) e1 &lt;- new.env() setwd(&quot;~/Google Drive/2016-BMGF-Segmentation/NGA&quot;) load(&quot;./temp/nga_bmgf_seg_1.RData&quot;, envir=e1) setwd(&quot;~/Projects/2017-agra-aasr&quot;) ghs &lt;- e1$ghs ghs.farm &lt;- e1$farm ghs.geo &lt;- e1$geo12 ghs.inc &lt;- e1$inc12 ghs.ppp &lt;- e1$ppp12 rm(e1) # Verify all income aggregates in `ghs.inc` (received from Cleo/IFPRI) # Cleo suggested using crop/fish/livestock and by-products sold/gift/lost/reimbursed # `cropsold`, `agbyprodincimp`, `reimbursmt_n`, `gift_n` in `Income2.dta` # Note that last 3 vars have negative sign, need to correct summary(ghs.inc$hh) # Min. 1st Qu. Median Mean 3rd Qu. Max. # 10000 90040 190000 183200 280000 370000 summary(ghs$hhid) summary(ghs.ppp$hhid) # =&gt; `hh` match `hhid` vars &lt;- c(&quot;cropsold&quot;, &quot;croplost&quot;, &quot;cropownimp&quot;, &quot;reimbursmt_n&quot;, &quot;lost_n&quot;, &quot;gift_n&quot;, &quot;self&quot;, &quot;fishincimp&quot;, &quot;agr_wge&quot;, &quot;nonagr_wge&quot;, &quot;other&quot;, &quot;farmrntimp&quot;, &quot;agrentimp&quot;, &quot;privtransfer&quot;, &quot;pubtransfer&quot;) ghs.inc[, lapply(names(.SD), function(x) boxplot(.SD[[x]], main=x)), .SDcols=vars] # Reconstruct all value vars in `ghs` # `livstrevimp`, `livstbyprod`, `fishincimp` have been corrected in separate files # Use `ghs$lstocksold` instead of `ghs.inc$livstrevimp` # Use `ghs$fishsold` instead of `ghs.inc$fishincimp` vars.val &lt;- c(&quot;cropsales&quot;, &quot;cropvalue&quot;, &quot;agsales&quot;, &quot;agsalespc&quot;, &quot;aggross&quot;, &quot;totgross&quot;, &quot;cropsales_sh&quot;, &quot;aggross_sh&quot;) ghs[, (unique(c(vars, vars.val))) := NULL] setkey(ghs, hhid) setkey(ghs.inc, hh) setkey(ghs.farm, hhid) ghs[ghs.farm, croparea := croparea] ghs[ghs.inc, cropsales := rowSums(.SD[, .(cropsold, agbyprodincimp, -reimbursmt_n, -gift_n)], na.rm=T)] summary(ghs$cropsales) # Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s # 0 0 0 37910 18500 3068000 19 ghs[ghs.inc, cropvalue := rowSums(.SD[, .(cropsales, croplost, cropownimp, -lost_n)], na.rm=T)] summary(ghs$cropvalue) # Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s # 0 0 68370 14990000 23400000 161000000 19 ghs[, agsales := rowSums(.SD[, .(cropsales, lstocksold, fishsold)], na.rm=T)] summary(ghs$agsales) # Min. 1st Qu. Median Mean 3rd Qu. Max. # 0 0 0 240900 63420 90620000 ghs[, agsalespc := agsales/equiv] ghs[ghs.inc, aggross := rowSums(.SD[, .(agsales, agr_wge, farmrntimp, agrentimp, cropownimp)], na.rm=T)] summary(ghs$aggross) # Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s # 0 0 150900 15200000 23450000 163100000 19 ghs[ghs.inc, totgross := rowSums(.SD[, .(aggross, nonagr_wge, other, privtransfer, pubtransfer, self)], na.rm=T)] summary(ghs$totgross) # Min. 1st Qu. Median Mean 3rd Qu. Max. NA&#39;s # 0 287500 1525000 15630000 23620000 163100000 19 ghs[, noaggross := rowSums(.SD[, .(totgross, -aggross)], na.rm=T)] summary(ghs$noaggross) # Min. 1st Qu. Median Mean 3rd Qu. Max. # 0 2075 172700 419800 499400 10150000 ghs[, aggross_sh := aggross/totgross] ghs[, noaggross_sh := 1 - aggross_sh] ghs[, cropsales_sh := cropsales/cropvalue] # Fix Inf values ghs[agsalespc==Inf, agsalespc := NA] # Define a farm holding as a household matching any of these conditions: # - has any `farmarea` or `croparea` # - has any `cropvalue` or `lstocksold` or `fishsold` # - has any `TLU_total` # - has any ag revenue `aggross` ghs[, boxplot(TLU_total)] ghs[, farm_hh := FALSE] ghs[farmarea&gt;0 | croparea&gt;0 | cropvalue&gt;0 | lstocksold&gt;0 | fishsold&gt;0 | TLU_total&gt;0 | aggross&gt;0, farm_hh := TRUE] ghs[, summary(farm_hh)] # Mode FALSE TRUE NA&#39;s # logical 1537 3343 0 # Which farms in `ghs` are not accounted for in `ghs.farm`? ghs.farm[!ghs[farm_hh==T], .N] # [1] 116 ghs[farm_hh==T][!ghs.farm, .N] # [1] 278 ghs.farm[!ghs[farm_hh==T], croparea] # =&gt; all 0 or NA ghs[farm_hh==T][!ghs.farm, cropsales] # =&gt; some crop sales # SHF 4ha dummy `croparea_4ha` (2-class) # Merge `croparea` into `ghs` (`hhid` are unique) ghs[, croparea_4ha := NULL] ghs[farm_hh==T, croparea_4ha := factor(croparea &lt;= 4, levels=c(T, F), labels=c(&quot;&lt;= 4 ha&quot;, &quot;&gt; 4 ha&quot;))] summary(ghs$croparea_4ha) # &lt;= 4 ha &gt; 4 ha NA&#39;s # 2840 94 1946 ghs[croparea==0, summary(croparea_4ha)] # &lt;= 4 ha &gt; 4 ha NA&#39;s # 240 0 7 # =&gt; need to re-run results without these 240 ghs[croparea==0, summary(cropsales)] ghs[croparea==0, summary(TLU_total)] # SHF 4ha dummy `croparea_2ha` (2-class) ghs[, croparea_2ha := NULL] ghs[farm_hh==T, croparea_2ha := factor(croparea &lt;= 2, levels=c(T, F), labels=c(&quot;&lt;= 2 ha&quot;, &quot;&gt; 2 ha&quot;))] summary(ghs$croparea_2ha) # &lt;= 2 ha &gt; 2 ha NA&#39;s # 2616 318 1946 # SHF 4ha dummy `croparea_clas` (3-class) ghs[, croparea_clas := NULL] ghs[farm_hh==T, croparea_clas := cut(croparea, c(-1,2,4,25), labels=c(&quot;&lt;= 2 ha&quot;, &quot;2-4 ha&quot;, &quot;&gt; 4 ha&quot;), ordered=T, right=F)] summary(ghs$croparea_clas) # &lt;= 2 ha 2-4 ha &gt; 4 ha NA&#39;s # 2616 224 94 1946 # Crop commercialization dummy `cropsales_any` (2-class) ghs[, cropsales_any := NULL] ghs[farm_hh==T, cropsales_any := factor(cropsales_sh &gt; 0, levels=c(T, F), labels=c(&quot;sales&quot;, &quot;no sales&quot;))] summary(ghs$cropsales_any) # sales no sales NA&#39;s # 1868 1234 1778 # Crop commercialization dummy `cropsales_clas` (3-class) ghs[, cropsales_clas := NULL] ghs[farm_hh==T, cropsales_clas := cut(cropsales_sh, c(-1,.05,.5,1.1), labels=c(&quot;LoC&quot;, &quot;MeC&quot;, &quot;HiC&quot;), ordered=T, right=F)] summary(ghs$cropsales_clas) # LoC MeC HiC NA&#39;s # 2559 239 304 1778 # Income diversification dummy `noaggross_clas` (3-class) ghs[, noaggross_clas := NULL] ghs[farm_hh==T, noaggross_clas := cut(noaggross_sh, c(-1,1/3,2/3,1.1), labels=c(&quot;LoD&quot;, &quot;MeD&quot;, &quot;HiD&quot;), ordered=T, right=F)] summary(ghs$noaggross_clas) # LoD MeD HiD NA&#39;s # 2528 172 608 1572 class9 &lt;- c(&quot;LoCLoD&quot;, &quot;LoCMeD&quot;, &quot;LoCHiD&quot;, &quot;MeCLoD&quot;, &quot;MeCMeD&quot;, &quot;MeCHiD&quot;, &quot;HiCLoD&quot;, &quot;HiCMeD&quot;, &quot;HiCHiD&quot;) # Classification dummy `` (9-class) ghs[, class9 := NULL] ghs[, class9 := factor(paste0(cropsales_clas, noaggross_clas), levels=class9)] summary(ghs$class9) # LoCLoD LoCMeD LoCHiD MeCLoD MeCMeD MeCHiD HiCLoD HiCMeD HiCHiD NA&#39;s # 2220 54 285 121 34 84 125 70 109 1778 # Merge new dummay vars into `ghs.farm` and `ghs.ppp` setkey(ghs, hhid) setkey(ghs.farm, hhid) setkey(ghs.ppp, hhid) ghs.farm[ghs, `:=`( croparea_2ha = croparea_2ha, croparea_4ha = croparea_4ha, cropsales_sh = cropsales_sh, cropsales_clas = cropsales_clas, noaggross_clas = noaggross_clas, class9 = class9 )] ghs.ppp[ghs, `:=`( zone = zone, croparea_2ha = croparea_2ha, croparea_4ha = croparea_4ha, cropsales_sh = cropsales_sh, cropsales_clas = cropsales_clas, noaggross_clas = noaggross_clas, class9 = class9 )] ########################################## # Define 2-stage stratified survey design (use most recent GHS wave only) ghs.svy &lt;- svydesign(~ea+hhid, strata=~zone+rural, weights=~wt_wave2, data=ghs[!is.na(wt_wave2)], nest=T) ghs.farm.svy &lt;- svydesign(~ea+hhid, strata=~zone+sector, weights=~wt_wave2, data=ghs.farm[!is.na(wt_wave2)], nest=T) ghs.ppp.svy &lt;- svydesign(~hhid, strata=~zone+rural, weights=~weight, data=ghs.ppp[!is.na(weight)], nest=T) summary(ghs.svy) # Stratified 2 - level Cluster Sampling design (with replacement) # With (481, 4867) clusters. # svydesign(~ea + hhid, strata = ~zone + rural, weights = ~wt_wave2, # data = ghs[!is.na(wt_wave2)], nest = T) # Probabilities: # Min. 1st Qu. Median Mean 3rd Qu. Max. # 0.0000239 0.0001235 0.0001892 0.0002150 0.0002699 0.0014700 # First-level Stratum Sizes: # north central north east north west south east south south south west # obs 798 754 890 791 786 848 # design.PSU 79 74 85 77 79 87 # actual.PSU 79 74 85 77 79 87 # Subset survey sample to farms ghs.svy.farm &lt;- subset(ghs.svy, farm_hh==T) # Subset survey sample to only SHF ghs.svy.shf &lt;- subset(ghs.svy, croparea_4ha==&quot;&lt;= 4 ha&quot;) ghs.farm.svy.shf &lt;- subset(ghs.farm.svy, croparea_4ha==&quot;&lt;= 4 ha&quot;) ghs.ppp.svy.shf &lt;- subset(ghs.ppp.svy, croparea_4ha==&quot;&lt;= 4 ha&quot;) # Verify sampling design (e.g. total population) (svytotal(~hhsize, ghs.svy, na.rm=T))/1E6 # total SE # hhsize 187.88 7601475 svytotal(~farm_hh, ghs.svy, na.rm=T)/1E6 # total SE # farm_hhFALSE 13.480 1259455 # farm_hhTRUE 19.256 712970 svymean(~farm_hh, ghs.svy, na.rm=T) # mean SE # farm_hhFALSE 0.41177 0.0249 # farm_hhTRUE 0.58823 0.0249 svymean(~croparea_4ha, ghs.svy.farm, na.rm=T) # mean SE # croparea_4ha&lt;= 4 ha 0.971845 0.0034 # croparea_4ha&gt; 4 ha 0.028155 0.0034 svytotal(~hhsize, ghs.svy.shf, na.rm=T) # total SE # hhsize 106349144 4497228 svymean(~cropsales_sh, ghs.svy.farm, na.rm=T) # mean SE # cropsales_sh 0.1141 0.0087 svyby(~cropsales_sh, ~croparea_4ha, ghs.svy.farm, svymean, na.rm=T) # croparea_4ha cropsales_sh se # &lt;= 4 ha &lt;= 4 ha 0.1220143 0.00648625 # &gt; 4 ha &gt; 4 ha 0.1768049 0.04914111 svyby(~cropsales_sh, ~croparea_4ha, ghs.svy.farm, svyquantile, quantiles=.5, ci=T, na.rm=T)*100 # croparea_4ha cropsales_sh se # &lt;= 4 ha NA 0.0771759 0.009096591 # &gt; 4 ha NA 0.2983541 0.297538378 svyby(~agsalespc, ~croparea_4ha, ghs.svy.farm, svymean, na.rm=T) # croparea_4ha agsalespc se # &lt;= 4 ha &lt;= 4 ha 87756.2 13964.07 # &gt; 4 ha &gt; 4 ha 140465.3 44667.0 svymean(~I(noaggross_sh*100), subset(ghs.svy.farm, !is.na(croparea)), na.rm=T) # mean SE # I(noaggross_sh * 100) 22.044 0.0127 # I(noaggross_sh * 100) 17.446 1.1725 svyquantile(~I(noaggross_sh*100), ghs.svy.farm, .5, na.rm=T) # 0.5 # I(noaggross_sh * 100) 0.8265929 svyby(~I(noaggross_sh*100), ~croparea_4ha, ghs.svy.farm, svymean, na.rm=T) # croparea_4ha I(noaggross_sh * 100) se # &lt;= 4 ha &lt;= 4 ha 17.58628 1.190880 # &gt; 4 ha &gt; 4 ha 12.53712 3.285989 svyby(~I(noaggross_sh*100), ~croparea_4ha, ghs.svy.farm, svyquantile, .5, ci=T, na.rm=T) # croparea_4ha I(noaggross_sh * 100) se # &lt;= 4 ha &lt;= 4 ha 0.6300151 0.08870994 # &gt; 4 ha &gt; 4 ha 0.3270542 0.12108961 # Other farms statistics tmp &lt;- ghs[!is.na(wt_wave2) &amp; farm_hh==T, .( f2malehh_tot=sum(femhead*wt_wave2, na.rm=T), malehh_tot=sum(-(femhead-1)*wt_wave2, na.rm=T), femalehh=weightedMean(femhead, wt_wave2, na.rm=T), hasland=weighted.mean(farmarea&gt;0, wt_wave2, na.rm=T), farmarea=weightedMean(hectares_1_hh_farmer, wt_wave2, na.rm=T), farmarea_med=weightedMedian(hectares_1_hh_farmer, wt_wave2, na.rm=T) ), keyby=croparea &lt;= 4] tmp &lt;- farm[, .( farmslive_tot=sum(farmslive*wt_wave2, na.rm=T), farmslive=weightedMean(farmslive, wt_wave2, na.rm=T), intens_idx2=weightedMean(intens_idx2, wt_wave2, na.rm=T), intens_idx2_med=weightedMedian(intens_idx2, wt_wave2, na.rm=T) ), keyby=croparea &lt;= 4] # Livestock tmp &lt;- ghs[!is.na(wt_wave2) &amp; totgross &gt; 0, .( TLU_total=sum(TLU_total, wt_wave2, na.rm=T), TLU_hh=weightedMean(TLU_total, wt_wave2, na.rm=T), TLU_hh_imp=weightedMean(TLU_total_imp, wt_wave2, na.rm=T) ), keyby=croparea &lt;= 4][, wt_wave2 := NULL] # Input uses tmp &lt;- farm[, lapply(.SD, weightedMean, wt_wave2, na.rm=T), .SDcols=c(&quot;wt_wave2&quot;, &quot;parcels&quot;, &quot;sh_chempest&quot;, &quot;sh_chemherb&quot;, &quot;sh_fertorg&quot;, &quot;sh_fertinorg&quot;, &quot;sh_seedp&quot;, &quot;tractorown_farms&quot;), keyby=croparea &lt;= 4][, wt_wave2 := NULL] # Poverty vars &lt;- c(&quot;weight&quot;, names(ppp12)[names(ppp12) %like% &quot;ppp&quot;]) tmp &lt;- ppp12[, lapply(.SD, weightedMean, weight, na.rm=T), .SDcols=vars, keyby=croparea &lt;= 4][, weight := NULL] # CROP SALES # FOOD EXPENDITURES m &lt;- svymean(~I(100*foodexp_ppp_m/rowSums(cbind(foodexp_ppp_m, nfoodexp_ppp_m), na.rm=T)), ghs.ppp.svy, na.rm=T) # mean SE # I(100 * foodexp_ppp_m/rowSums(cbind(foodexp_ppp_m, nfoodexp_ppp_m), na.rm = T)) 73.394 0.2999 plot(m) svyquantile(~I(100*foodexp_ppp_m/rowSums(cbind(foodexp_ppp_m, nfoodexp_ppp_m), na.rm=T)), ghs.ppp.svy, .5, ci=T, na.rm=T) # 0.5 # I(100 * foodexp_ppp_m/rowSums(cbind(foodexp_ppp_m, nfoodexp_ppp_m), na.rm = T)) 76.27067 3.1.1 Definitions (more vars to be added as needed) 3.1.1.1 Assets \\(farmarea\\) farm size (incl. parcels rented out and fallows) \\(TLU\\_total\\) tropical livestock units (combines all animals) 3.1.1.2 Income \\(croparea\\) cultivated area (annual) \\(cropsales\\) annual value of crops and crop byproducts sold (per RIGA method) \\[ cropsales=cropsold+agbyprodincimp-reimbursmtn-giftn \\] \\(cropvalue\\) annual value of crop production (excl. perennials) \\[ cropvalue=cropsales+croplost+cropownimp-lostn \\] \\(lstocksold\\) annual value of livestock products and byproducts sold \\[ lstocksold=livstrevgrossimp+livstbyprodimp \\] \\(agsales\\) farm sales, i.e. combined value of crop, livestock, and fish products sold \\[ agsales=cropsales+lstocksold+fishsold \\] \\(agsalespc\\) farm sales per adult equivalent \\[ agsalespc=\\frac{agsales}{equiv} \\] \\(aggross\\) farm income (includes value of own consumption, ag wages and ag rents) \\[ aggross=agsales+agrwge+farmrntimp+agrentimp+cropownimp \\] \\(totgross\\) total gross income (incl. farm income, non-farm income, and transfers) \\[ totgross=aggross+nonagrwge+other+privtransfer+pubtransfer+self \\] \\(aggross\\_sh\\) share of farm income in total household income \\[ aggross\\_sh=\\frac{aggross}{totgross} \\] \\(noaggross\\_sh\\) share of non-farm income in total household income \\[ noaggross\\_sh=1-aggross\\_sh \\] \\(cropsales\\_sh\\) commercialization rate for crops, defined as the value of crops and crop products sold over the value of annual crop production (excl. perennial crops) \\[ cropsales\\_sh = \\frac{cropsales}{cropvalue} \\] Note that all intermediary value variables (income and expenses) have been generated by IFPRI using FAO RIGA guidelines. Using these variables we define a farm holding as a household matching any of the following conditions: has any \\(farmarea\\) or \\(croparea\\) has any \\(cropvalue\\) or \\(lstocksold\\) or \\(fishsold\\) owns any livestock \\(TLU\\_total\\) collects any other revenue from farming \\(aggross\\) Within the subsample of farm households we look at the distribution of households across 3 key (“threshold”) variables: Cultivated/operated area \\(croparea\\) (using breaks at 2 ha and/or 4 ha) Crop commercialization \\(cropsales\\_sh\\) (using breaks at 5% and 50% of crop production) Share of off-farm income in total hhld income \\(naggross\\_sh\\) (using breaks at 1/3 and 2/3 of total income) The resulting classes of farm households are labelled as follows: tmp &lt;- factor(c(&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;), levels=c(&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;)) tmp &lt;- data.frame(clas=class9, C=rep(tmp, each=3), D=rep(tmp, 3)) pander(tabular((`Income Diversification`=D)~(`Crop Commercialization`=C)*Heading()*identity*Heading()*(as.character(clas)), data=tmp), split.table=Inf, emphasize.strong.cols=1, emphasize.italics.cols=2:4, emphasize.rownames=F, caption=&quot;Tab. Household Classification&quot;) Tab. Household Classification Income Diversification Crop Commercialization low medium high low LoCLoD MeCLoD HiCLoD medium LoCMeD MeCMeD HiCMeD high LoCHiD MeCHiD HiCHiD The following 3 tables show the count of observations in each class for farm households with cultivated area &lt;= 2ha, between 2 and 4ha, and &lt;= 4ha. pander(tabular(Heading()*noaggross_clas~Format(big.mark=&quot;,&quot;)*Heading()*croparea_clas*Heading()*cropsales_clas, data=ghs), split.table=Inf, justify=&quot;rrrrrrrrrr&quot;, emphasize.strong.cols=1, emphasize.rownames=F, caption=&quot;Tab. Count of Observations across Classes of Farm Households&quot;) Tab. Count of Observations across Classes of Farm Households \\(\\leq\\) 2 ha LoC MeC HiC 2-4 ha LoC MeC HiC \\(&gt;\\) 4 ha LoC MeC HiC LoD 1,829 109 107 182 8 14 75 4 3 MeD 39 32 65 0 1 2 0 1 2 HiD 164 81 98 5 1 4 0 0 6 pander(tabular(Heading()*noaggross_clas~Format(big.mark=&quot;,&quot;)*Heading()*croparea_2ha*Heading()*cropsales_clas, data=ghs), split.table=Inf, justify=&quot;rrrrrrr&quot;, emphasize.strong.cols=1, emphasize.rownames=F, caption=&quot;Tab. Count of Observations across Classes of Farm Households (below/above 2 ha)&quot;) Tab. Count of Observations across Classes of Farm Households (below/above 2 ha) \\(\\leq\\) 2 ha LoC MeC HiC \\(&gt;\\) 2 ha LoC MeC HiC LoD 1,829 109 107 257 12 17 MeD 39 32 65 0 2 4 HiD 164 81 98 5 1 10 pander(tabular(Heading()*noaggross_clas~Format(big.mark=&quot;,&quot;)*Heading()*croparea_4ha*Heading()*cropsales_clas, data=ghs), split.table=Inf, justify=&quot;rrrrrrr&quot;, emphasize.strong.cols=1, emphasize.rownames=F, caption=&quot;Tab. Count of Observations across Classes of Farm Households (below/above 4 ha)&quot;) Tab. Count of Observations across Classes of Farm Households (below/above 4 ha) \\(\\leq\\) 4 ha LoC MeC HiC \\(&gt;\\) 4 ha LoC MeC HiC LoD 2,011 117 121 75 4 3 MeD 39 33 67 0 1 2 HiD 169 82 102 0 0 6 In the next tables we limit categories to farm households below/above 4ha (as this approach produces classes with a larger count of observations). Using data from the 2012 Nigeria General Household Survey (GHS) we estimate the proportions of farm households across all categories and the distributions of other key household characteristics (household structure, assets, farm input uses, etc.). Estimated proportions of farm households across classes and categories are shown in the next graph and table. par(mfrow=c(1,3), mar=c(5,1,0,2)) plot(svytable(~croparea_4ha+cropsales_clas, ghs.svy.shf), main=NA, las=2, ylab=list(&quot;Cultivated Area&quot;, cex=.8), xlab=list(&quot;Crop Commercialization 3-class&quot;, cex=.8)) plot(svytable(~croparea_4ha+noaggross_clas, ghs.svy.shf), main=NA, las=2, ylab=list(&quot;Cultivated Area&quot;, cex=.8), xlab=list(&quot;Off-Farm Income 3-class&quot;, cex=.8)) plot(svytable(~croparea_4ha+class9, ghs.svy.shf), main=NA, las=2, ylab=list(&quot;Cultivated Area&quot;, cex=.8), xlab=list(&quot;Categories 9-class&quot;, cex=.8)) Fig. 3.1: Est. Proportions of Farm Holdings across Categories pander(ftable(svymean(~I(interaction(croparea_4ha, cropsales_clas, noaggross_clas)), ghs.svy.farm, na.rm=T), rownames=list( levels(ghs$croparea_4ha), levels(ghs$cropsales_clas), levels(ghs$noaggross_clas)))*100, round=2, emphasize.italics.rows=c(1,5,7,9), emphasize.strong.cols=1, emphasize.strong.rows=2, caption=&quot;Est. Proportions of Farm Holdings across Categories&quot;) Est. Proportions of Farm Holdings across Categories &lt;= 4 ha &gt; 4 ha LoC MeC HiC LoC MeC HiC LoD mean 70.65 4.01 4.6 2.01 0.27 0.09 SE 1.63 0.49 0.61 0.36 0.17 0.06 MeD mean 1.12 1.19 2.56 0 0.03 0.21 SE 0.22 0.22 0.38 0 0.03 0.15 HiD mean 5.93 2.97 4.15 0 0 0.21 SE 0.66 0.42 0.56 0 0 0.09 3.1.2 Key Results Remark. Using the &lt;= 4 ha smallholding definition above, we estimate as of 2012: there are 33M households in Nigeria 58.8% (19.2M) generate a revenue from farming (wages, rents, crops, livestock, and/or fish) 97% (16M) of farm holdings are small corresponding to a beneficiary population of 107M crop commercialization is low at 12.2% for smallholdings (below 4 ha) and 17.7% for larger holdings (over 4 ha) on average. Median rates are much smaller however with 0.07% for smallholdings and 0.30% for larger holdings. income diversification in farm households is 17% on average (18% for smallholdings and 13% for larger holdings) (i.e. off-farm income is 17% on average), but medians off-farm incomes are negligible at 0.83% (0.63% for smallholdings and 0.33% for larger holdings). Notes: for LCU conversions 1 int$ = 108.23 Naira (2015) par(mfrow=c(1,3), font.main=1) svyhist(~croparea, ghs.svy.farm, main=&quot;Cultivated Area&quot;, xlab=&quot;croparea (ha)&quot;, xlim=c(0,10)) lines(svysmooth(~croparea, ghs.svy.farm, bandwidth=1), lwd=1, col=40) svyhist(~I(cropsales_sh*100), ghs.svy.farm, main=&quot;Crop Commercialization&quot;, xlab=&quot;cropsales_sh (percent)&quot;) lines(svysmooth(~I(cropsales_sh*100), ghs.svy.farm, bandwidth=1), lwd=1, col=40) svyhist(~I(noaggross_sh*100), ghs.svy.farm, main=&quot;Income Diversification&quot;, xlab=&quot;noaggross_sh (percent)&quot;) lines(svysmooth(~I(noaggross_sh*100), ghs.svy.farm, bandwidth=1), lwd=1, col=40) Fig. 3.2: Cultivated Area, Crop Commercialization, and Income Diversification par(mfrow=c(1,2), cex=.7) svyboxplot(I(cropsales_sh*100)~croparea_4ha, ghs.svy.farm, xlab=&quot;Cultivated Area&quot;, ylab=&quot;Crop Commercialization (percent)&quot;, legend=2, ylim=c(0,20)) svyboxplot(I(noaggross_sh*100)~croparea_4ha, ghs.svy.farm, xlab=&quot;Cultivated Area&quot;, ylab=&quot;Off-Farm Incomen (percent)&quot;, legend=2, ylim=c(0,20)) Fig. 3.3: Crop Commercialization and Income Diversification along Cultivated Area par(mfrow=c(1,2), cex=.7) svyplot(I(cropsales/1000)~agehead, subset(ghs.svy.farm, femhead==0), style=&quot;transparent&quot;, basecol=4, xlab=&quot;Age of Hhld Head&quot;, ylab=&quot;Crop Sales (&#39;000 LCU)&quot;) legend(&quot;topright&quot;, lty=c(1,1), col=c(4), legend=c(&quot;Male&quot;), bty=&quot;n&quot;) svyplot(I(cropsales/1000)~agehead, subset(ghs.svy.farm, femhead==1), style=&quot;transparent&quot;, basecol=41, xlab=&quot;Age of Hhld Head&quot;, ylab=&quot;Crop Sales (&#39;000 LCU)&quot;) legend(&quot;topright&quot;, lty=c(1,1), col=c(41), legend=c(&quot;Female&quot;), bty=&quot;n&quot;) Fig. 3.4: Crop Commercialization by Age and Gender par(mfrow=c(1,1), cex=.7) l &lt;- levels(ghs$zone) plot(c(15,80), c(0,350), type=&quot;n&quot;, xlab=&quot;Age of Hhld Head&quot;, ylab=&quot;Est. Mean Crop Sales (&#39;000 LCU)&quot;) legend(&quot;topright&quot;, lty=c(1,1), col=seq_along(l)*5, legend=l, bty=&quot;n&quot;) for (i in seq_along(l)) lines( svysmooth(I(cropsales/1000)~agehead, subset(ghs.svy.farm, zone==levels(ghs$zone)[i]), banwidth=10), col=i*5) par(mfrow=c(1,2), cex=.7) svyplot(I(noaggross/1000)~agehead, subset(ghs.svy.farm, femhead==0), style=&quot;transparent&quot;, basecol=4, xlab=&quot;Age of Hhld Head&quot;, ylab=&quot;Off-Farm Income (&#39;000 LCU)&quot;) legend(&quot;topright&quot;, lty=c(1,1), col=c(4), legend=c(&quot;Male&quot;), bty=&quot;n&quot;) svyplot(I(noaggross/1000)~agehead, subset(ghs.svy.farm, femhead==1), style=&quot;transparent&quot;, basecol=41, xlab=&quot;Age of Hhld Head&quot;, ylab=&quot;Off-Farm Income (&#39;000 LCU)&quot;) legend(&quot;topright&quot;, lty=c(1,1), col=c(41), legend=c(&quot;Female&quot;), bty=&quot;n&quot;) Fig. 3.5: Income Diversification by Age and Gender l &lt;- levels(ghs$zone) plot(c(15,100), c(0,800), type=&quot;n&quot;, xlab=&quot;Age of Hhld Head&quot;, ylab=&quot;Off-Farm Income (&#39;000 LCU)&quot;) legend(&quot;topright&quot;, lty=c(1,1), col=seq_along(l)*5, legend=l, bty=&quot;n&quot;) for (i in seq_along(l)) lines( svysmooth(I(noaggross/1000)~agehead, subset(ghs.svy.farm, zone==levels(ghs$zone)[i]), banwidth=10), col=i*5) # Estimated quintiles of `cropsales_sh` for smallholders tmp &lt;- svyCrossTab(list(~I(cropsales_sh*100), ~I(cropsales/1000)), ~croparea_4ha, ghs.svy.farm, quantiles=c(.25,.5,.75)) pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*By*Heading()*Stat*Heading()*Format(big.mark=&quot;,&quot;, nsmall=2, digits=0)*identity, data=tmp), emphasize.italics.cols=c(4,6), split.table=Inf, caption=&quot;Tab. Crop Commercialization for Farms below/above 4 ha (percent, &#39;000 LCU)&quot;) Tab. Crop Commercialization for Farms below/above 4 ha (percent, ’000 LCU) Variable \\(\\leq\\) 4 ha est. std. err. \\(&gt;\\) 4 ha est. std. err. (cropsales_sh * 100) Mean 12.20 0.99 17.68 4.56 Q25 0.00 0.00 0.06 0.02 Q50 0.08 0.02 0.30 0.50 Q75 1.15 0.38 7.90 23.01 (cropsales/1000) Mean 63.74 5.44 195.50 49.81 Q25 0.00 0.00 21.08 10.55 Q50 8.00 1.71 62.03 21.80 Q75 54.35 6.49 193.38 113.64 # Estimated quintiles of `noaggross_sh` for smallholders tmp &lt;- svyCrossTab(list(~I(noaggross_sh*100), ~I(noaggross/1000)), ~croparea_4ha, ghs.svy.farm, quantiles=c(.25,.5,.75)) pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*By*Heading()*Stat*Heading()*Format(big.mark=&quot;,&quot;, nsmall=2, digits=0)*identity, data=tmp), emphasize.italics.cols=c(4,6), split.table=Inf, caption=&quot;Tab. Off-Farm Income for Farms below/above 4 ha (percent, &#39;000 LCU)&quot;) Tab. Off-Farm Income for Farms below/above 4 ha (percent, ’000 LCU) Variable \\(\\leq\\) 4 ha est. std. err. \\(&gt;\\) 4 ha est. std. err. (noaggross_sh * 100) Mean 17.59 1.19 12.54 3.29 Q25 0.00 0.00 0.00 0.02 Q50 0.63 0.09 0.33 0.12 Q75 8.07 3.44 2.14 9.73 (noaggross/1000) Mean 293.92 16.17 309.64 61.23 Q25 0.00 0.00 0.00 5.15 Q50 113.48 9.70 132.73 53.38 Q75 363.10 19.87 393.34 82.47 The 9 categories of small farm holdings are further characterized in the next graphs and summary tables. # farmarea svyCrossPlot(~farmarea, ghs.svy.shf, breaks=20, bandwidth=.5, xlim=c(0,4), xlab=&quot;Farm Area (ha)&quot;) # TLU_total svyCrossPlot(~TLU_total, ghs.svy.shf, breaks=20, bandwidth=1, xlim=c(0,30), xlab=&quot;Livestock Holdings (TLU)&quot;) # lstocksold svyCrossPlot(~I(lstocksold/1000), ghs.svy.shf, breaks=20, bandwidth=100, xlim=c(0,1500), xlab=&quot;Livestock Sales (&#39;000 LCU)&quot;) # aggross_sh svyCrossPlot(~I(aggross_sh*100), ghs.svy.shf, breaks=20, bandwidth=1, xlab=&quot;Share of Farm Income (percent)&quot;) Note the tables below omit the last 3 classes to save space. # Estimated quintiles of other variables for smallholders tmp &lt;- svyCrossTab(list(~I(cropvalue/1000), ~I(cropsales/1000), ~I(lstocksold/1000), ~I(agsales/1000), ~agsalespc, ~I(aggross/1000)), ~class9, ghs.svy.shf, quantiles=c(.25,.5,.75)) tmp &lt;- tmp[!By %like% &quot;HiC&quot;] tmp[, By := as.character(By)] pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*Factor(By)*Heading()*Stat*Heading()*identity*Format(digits=0, big.mark=&quot;,&quot;, scientific=F), data=tmp), justify=&quot;ccrrrrrrrrrrrr&quot;, emphasize.italics.cols=c(4,6,8), split.table=Inf, caption=&quot;Tab. Sources of Agricultural Income for Small Farm Households across Categories (&#39;000 LCU)&quot;) Tab. Sources of Agricultural Income for Small Farm Households across Categories (’000 LCU) Variable LoCHiD est. std. err. LoCLoD est. std. err. LoCMeD est. std. err. MeCHiD est. std. err. MeCLoD est. std. err. MeCMeD est. std. err. (cropvalue/1000) Mean 33 3 32,136 1,108 73 18 49 4 2,768 694 125 19 Q25 10 2 12,484 761 20 8 22 3 46 7 36 13 Q50 24 3 26,043 1,245 36 7 34 6 128 38 113 25 Q75 45 4 45,297 2,201 79 22 69 8 3,746 1,444 185 39 (cropsales/1000) Mean 0 0 49 5 0 0 12 2 263 61 40 8 Q25 0 0 0 0 0 0 5 1 8 2 9 4 Q50 0 0 7 2 0 0 7 1 38 13 26 10 Q75 0 0 50 6 0 0 14 6 404 137 51 20 (lstocksold/1000) Mean 8 2 225 24 81 48 13 5 335 99 132 77 Q25 0 0 0 0 0 0 0 0 0 0 0 0 Q50 0 0 0 0 0 3 0 0 0 1 0 4 Q75 5 3 48 7 27 18 7 5 30 42 43 46 (agsales/1000) Mean 9 2 357 78 81 48 25 5 605 125 174 79 Q25 0 0 2 1 0 0 6 1 14 5 21 10 Q50 0 0 36 4 0 4 11 2 84 69 50 13 Q75 5 3 129 14 27 17 33 7 634 143 98 127 agsalespc Mean 1,858 398 82,419 17,937 14,910 7,543 6,667 1,933 185,677 44,809 35,520 12,965 Q25 0 0 388 317 0 0 1,190 236 4,218 1,210 5,831 1,604 Q50 0 0 8,008 886 0 904 2,586 661 19,051 15,632 10,462 4,143 Q75 1,183 573 28,274 3,238 11,460 3,897 7,386 1,377 178,619 44,402 25,876 40,983 (aggross/1000) Mean 44 4 32,448 1,107 186 54 64 7 3,131 708 264 81 Q25 13 3 12,609 723 46 15 25 2 60 18 72 18 Q50 32 4 26,207 1,307 75 16 44 9 239 278 135 26 Q75 53 5 46,155 2,175 129 53 81 9 4,156 931 263 64 tmp &lt;- svyCrossTab(list(~I(cropsales_sh*100), ~I(aggross_sh*100)), ~class9, subset(ghs.svy.shf, !class9 %like% &quot;HiC&quot;), quantiles=c(.25,.5,.75)) tmp &lt;- tmp[!By %like% &quot;HiC&quot;] tmp[, By := as.character(By)] pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*Factor(By)*Heading()*Stat*Heading()*identity*Format(digits=0, nsmall=2), data=tmp), justify=&quot;ccrrrrrrrrrrrr&quot;, emphasize.italics.cols=c(4,6,8), split.table=Inf, caption=&quot;Tab. Sources of Agricultural Income for Small Farm Households across Categories (percent)&quot;) Tab. Sources of Agricultural Income for Small Farm Households across Categories (percent) Variable LoCHiD est. std. err. LoCLoD est. std. err. LoCMeD est. std. err. MeCHiD est. std. err. MeCLoD est. std. err. MeCMeD est. std. err. (cropsales_sh * 100) Mean 0.25 1.49 0.27 1.60 0.14 2.48 24.02 0.25 21.17 0.27 29.21 0.14 Q25 0.00 2.71 0.00 2.29 0.00 3.06 13.78 0.00 8.98 0.03 16.27 0.00 Q50 21.51 0.00 17.62 0.00 31.43 0.00 0.00 13.78 0.23 8.98 0.00 16.27 Q75 0.00 21.51 0.00 17.62 0.00 31.43 1.18 0.00 0.96 0.23 4.85 0.00 (aggross_sh * 100) Mean 9.91 0.97 98.60 0.79 45.77 1.93 14.29 9.91 96.58 98.60 49.82 45.77 Q25 2.96 1.32 98.74 0.00 35.90 3.88 6.49 1.42 95.17 0.00 40.62 1.94 Q50 12.49 2.96 100.00 98.74 47.21 35.90 14.10 6.49 100.00 95.17 51.17 40.62 Q75 0.46 12.49 0.12 100.00 2.11 47.21 1.22 14.10 2.57 100.00 2.35 51.17 tmp &lt;- svyCrossTab(list(~farmarea, ~croparea, ~TLU_total), ~class9, subset(ghs.svy.shf, !class9 %like% &quot;HiC&quot;), quantiles=c(.25,.5,.75)) tmp &lt;- tmp[!By %like% &quot;HiC&quot;] tmp[, By := as.character(By)] pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*Factor(By)*Heading()*Stat*Heading()*Format(digits=0, big.mark=&quot;,&quot;, nsmall=2)*identity, data=tmp), justify=&quot;ccrrrrrrrrrrrr&quot;, emphasize.italics.cols=c(4,6,8), split.table=Inf, caption=&quot;Tab. Land and Livestock Assets of Small Farm Households across Categories (ha, TLU)&quot;) Tab. Land and Livestock Assets of Small Farm Households across Categories (ha, TLU) Variable LoCHiD est. std. err. LoCLoD est. std. err. LoCMeD est. std. err. MeCHiD est. std. err. MeCLoD est. std. err. MeCMeD est. std. err. farmarea Mean 0.23 0.04 0.72 0.16 0.23 0.10 0.24 0.23 0.88 0.72 0.44 0.23 Q25 0.02 0.02 0.18 0.13 0.00 0.09 0.04 0.06 0.11 0.05 0.07 0.18 Q50 0.10 0.02 0.55 0.18 0.21 0.00 0.28 0.04 1.00 0.11 0.25 0.07 Q75 0.01 0.10 0.01 0.55 0.02 0.21 0.01 0.28 0.05 1.00 0.04 0.25 croparea Mean 0.23 0.04 0.71 0.16 0.23 0.10 0.24 0.23 0.88 0.71 0.43 0.23 Q25 0.02 0.02 0.17 0.13 0.00 0.09 0.04 0.06 0.11 0.05 0.07 0.18 Q50 0.10 0.02 0.55 0.17 0.17 0.00 0.27 0.04 0.99 0.11 0.25 0.07 Q75 0.01 0.10 0.01 0.55 0.02 0.17 0.01 0.27 0.05 0.99 0.03 0.25 TLU_total Mean 0.33 0.15 1.72 0.07 0.36 0.47 0.54 0.33 0.33 1.72 0.79 0.36 Q25 0.00 0.05 0.00 0.03 0.00 0.07 0.00 0.09 0.00 0.13 0.00 0.11 Q50 0.08 0.00 0.03 0.00 0.11 0.00 0.30 0.00 1.30 0.00 0.15 0.00 Q75 0.00 0.08 0.00 0.03 0.00 0.11 0.00 0.30 0.00 1.30 0.02 0.15 # Demographics tmp &lt;- svyCrossTab(list(~hhsize, ~I(femhead*100), ~agehead, ~I(lithead*100), ~eduyears, ~numchildren, ~equiv, ~females, ~males, ~sh_ed_none, ~sh_ed_prim), ~class9, subset(ghs.svy.shf, !class9 %like% &quot;HiC&quot;), quantiles=c(.25,.5,.75)) tmp &lt;- tmp[!By %like% &quot;HiC&quot;] tmp[, By := as.character(By)] pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*Factor(By)*Heading()*Stat*Heading()*Format(digits=0, big.mark=&quot;,&quot;, nsmall=2)*identity, data=tmp), justify=&quot;ccrrrrrrrrrrrr&quot;, emphasize.italics.cols=c(4,6,8), split.table=Inf, caption=&quot;Tab. Demographics of Small Farm Households across Categories&quot;) Tab. Demographics of Small Farm Households across Categories Variable LoCHiD est. std. err. LoCLoD est. std. err. LoCMeD est. std. err. MeCHiD est. std. err. MeCLoD est. std. err. MeCMeD est. std. err. hhsize Mean 6.33 0.30 6.87 0.38 6.24 0.45 6.23 6.33 5.93 6.87 5.71 6.24 Q25 4.00 0.51 5.00 0.51 3.98 0.63 4.83 0.51 3.10 0.00 3.61 1.14 Q50 6.00 4.00 6.00 5.00 5.53 3.98 8.00 4.83 9.00 3.10 8.00 3.61 Q75 0.51 6.00 0.26 6.00 1.12 5.53 0.26 8.00 0.77 9.00 0.77 8.00 (femhead * 100) Mean 21.11 4.23 10.83 3.15 18.87 6.21 14.32 21.11 13.31 10.83 10.30 18.87 Q25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 25.51 0.00 0.00 0.00 25.51 Q50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 agehead Mean 54.44 1.69 51.66 1.73 57.97 2.73 56.43 54.44 57.64 51.66 61.99 57.97 Q25 43.00 2.30 40.00 2.84 42.00 3.93 49.00 1.79 45.00 0.77 51.36 5.24 Q50 55.00 43.00 59.00 40.00 60.67 42.00 64.50 49.00 61.00 45.00 72.00 51.36 Q75 1.38 55.00 0.26 59.00 4.76 60.67 2.81 64.50 2.04 61.00 4.24 72.00 (lithead * 100) Mean 69.34 5.42 55.08 6.09 62.18 9.01 73.55 69.34 49.94 55.08 58.89 62.18 Q25 0.00 0.00 0.00 25.51 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q50 100.00 0.00 0.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 Q75 25.51 100.00 0.00 0.00 25.51 100.00 25.51 100.00 0.00 100.00 9.30 100.00 eduyears Mean 7.87 0.50 7.09 0.91 8.24 0.84 8.52 7.87 7.49 7.09 8.06 8.24 Q25 4.00 1.29 3.00 0.00 6.00 1.15 6.00 0.26 5.00 0.00 6.00 1.28 Q50 6.00 4.00 6.00 3.00 6.00 6.00 12.00 6.00 12.00 5.00 12.00 6.00 Q75 0.77 6.00 0.26 6.00 0.89 6.00 0.76 12.00 1.02 12.00 1.28 12.00 numchildren Mean 2.23 0.26 2.90 0.21 2.46 0.31 2.03 2.23 2.08 2.90 1.69 2.46 Q25 1.00 0.26 1.00 0.26 0.54 0.77 0.00 0.26 0.00 0.26 0.00 1.19 Q50 2.00 1.00 2.00 1.00 1.00 0.54 4.00 0.00 4.00 0.00 3.00 0.00 Q75 0.26 2.00 0.00 2.00 0.26 1.00 0.26 4.00 0.26 4.00 0.23 3.00 equiv Mean 4.69 0.23 5.01 0.31 4.58 0.34 4.68 4.69 4.43 5.01 4.47 4.58 Q25 3.00 0.26 3.50 0.20 2.50 0.49 3.50 0.19 2.50 0.13 2.81 0.77 Q50 4.50 3.00 4.00 3.50 4.50 2.50 6.00 3.50 6.50 2.50 6.00 2.81 Q75 0.29 4.50 0.13 4.00 0.79 4.50 0.40 6.00 0.26 6.50 0.56 6.00 females Mean 3.23 0.20 3.42 0.22 3.17 0.31 3.17 3.23 2.94 3.42 2.86 3.17 Q25 2.00 0.26 2.00 0.26 1.00 0.36 2.00 0.26 2.00 0.26 1.00 0.77 Q50 3.00 2.00 2.98 2.00 3.00 1.00 4.00 2.00 5.00 2.00 4.77 1.00 Q75 0.26 3.00 0.00 2.98 0.77 3.00 0.00 4.00 0.26 5.00 0.33 4.77 males Mean 3.10 0.18 3.45 0.22 3.07 0.29 3.06 3.10 3.00 3.45 2.85 3.07 Q25 2.00 0.51 2.00 0.26 1.00 0.59 2.00 0.26 1.00 0.26 1.00 0.87 Q50 3.00 2.00 3.00 2.00 3.00 1.00 4.00 2.00 5.00 1.00 4.00 1.00 Q75 0.26 3.00 0.00 3.00 0.33 3.00 0.26 4.00 0.26 5.00 0.26 4.00 sh_ed_none Mean 4.10 0.98 5.63 2.86 3.62 1.34 3.21 4.10 8.40 5.63 3.06 3.62 Q25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 3.57 Q50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 sh_ed_prim Mean 45.89 3.96 62.15 3.42 57.69 5.91 43.93 45.89 58.80 62.15 43.29 57.69 Q25 20.00 7.28 33.88 4.25 33.33 6.34 15.37 5.95 33.33 0.00 20.00 6.00 Q50 50.00 20.00 57.14 33.88 50.00 33.33 66.67 15.37 100.00 33.33 75.00 20.00 Q75 6.97 50.00 1.70 57.14 6.66 50.00 6.38 66.67 6.38 100.00 8.50 75.00 # Input uses tmp &lt;- svyCrossTab(list(~parcels, ~I(chempest_farms*100), ~I(chemherb_farms*100), ~I(fertorg_farms*100), ~I(fertinorg_farms*100), ~I(seedp_farms*100), ~I(tractorown_farms*100), ~intens_idx2), ~class9, subset(ghs.farm.svy.shf, !class9 %like% &quot;HiC&quot;), quantiles=c(.25,.5,.75)) tmp &lt;- tmp[!By %like% &quot;HiC&quot;] tmp[, By := as.character(By)] pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*Factor(By)*Heading()*Stat*Heading()*Format(digits=0, big.mark=&quot;,&quot;, nsmall=2)*identity, data=tmp), justify=&quot;ccrrrrrrrrrrrr&quot;, emphasize.italics.cols=c(4,6,8), split.table=Inf, caption=&quot;Tab. Parcels and Input Uses for Small Farm Households across Categories (percent)&quot;) Tab. Parcels and Input Uses for Small Farm Households across Categories (percent) Variable LoCHiD est. std. err. LoCLoD est. std. err. LoCMeD est. std. err. MeCHiD est. std. err. MeCLoD est. std. err. MeCMeD est. std. err. parcels Mean 1.73 0.16 1.92 0.12 2.10 0.23 2.02 1.73 2.27 1.92 2.29 2.10 Q25 1.00 0.26 1.00 0.00 1.00 0.51 1.00 0.00 2.00 0.26 1.00 0.26 Q50 2.00 1.00 2.00 1.00 2.00 1.00 2.00 1.00 2.00 2.00 3.00 1.00 Q75 0.00 2.00 0.00 2.00 0.26 2.00 0.00 2.00 0.26 2.00 0.26 3.00 (chempest_farms * 100) Mean 2.18 1.83 20.78 5.41 10.46 5.76 2.58 2.18 25.54 20.78 10.32 10.46 Q25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 (chemherb_farms * 100) Mean 11.56 3.54 26.81 6.05 12.00 7.60 8.89 11.56 35.26 26.81 20.50 12.00 Q25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 100.00 0.00 0.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 100.00 0.00 0.00 (fertorg_farms * 100) Mean 3.69 2.27 4.58 0.00 3.34 0.00 4.18 3.69 0.00 4.58 0.00 3.34 Q25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 (fertinorg_farms * 100) Mean 24.70 5.19 48.23 3.49 30.01 9.79 21.11 24.70 16.83 48.23 35.50 30.01 Q25 0.00 0.00 0.00 0.00 0.00 25.51 0.00 25.51 0.00 0.00 0.00 0.00 Q50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 100.00 0.00 100.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 100.00 0.00 100.00 (seedp_farms * 100) Mean 46.74 6.17 27.78 5.27 27.65 8.56 33.71 46.74 25.55 27.78 37.10 27.65 Q25 0.00 0.00 0.00 0.00 0.00 25.12 0.00 0.00 0.00 0.00 0.00 0.00 Q50 0.00 0.00 0.00 0.00 0.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 100.00 0.00 100.00 0.00 100.00 (tractorown_farms * 100) Mean 2.21 0.00 1.15 0.95 2.57 1.62 0.00 2.21 0.95 1.15 1.62 2.57 Q25 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q50 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 Q75 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 intens_idx2 Mean 0.90 0.09 1.42 0.08 0.83 0.20 0.71 0.90 0.79 1.42 0.96 0.83 Q25 0.00 0.25 0.33 0.13 0.00 0.26 0.00 0.26 0.00 0.00 0.00 0.26 Q50 0.76 0.00 0.67 0.33 0.78 0.00 1.00 0.00 2.00 0.00 1.33 0.00 Q75 0.00 0.76 0.13 0.67 0.07 0.78 0.00 1.00 0.09 2.00 0.13 1.33 # Poverty tmp &lt;- svyCrossTab(list(~pcexp_ppp_m, ~foodexp_ppp_m, ~nfoodexp_ppp_m, ~I(poor_ppp1*100), ~I(poor_ppp2*100), ~I(povgap_ppp1*100), ~I(povgap_ppp2*100), ~I(sevpov_ppp1*100), ~I(sevpov_ppp2*100)), ~class9, subset(ghs.ppp.svy.shf, !class9 %like% &quot;HiC&quot;), quantiles=c(.25,.5,.75)) tmp &lt;- tmp[!By %like% &quot;HiC&quot;] tmp[, By := as.character(By)] pander(tabular( Variable*(Mean+Q25+Q50+Q75)~Heading()*Factor(By)*Heading()*Stat*Heading()*Format(digits=0, big.mark=&quot;,&quot;, nsmall=2)*identity, data=tmp), justify=&quot;ccrrrrrrrrrrrr&quot;, emphasize.italics.cols=c(4,6,8), split.table=Inf, caption=&quot;Tab. Poverty Incidence in Small Farm Households across Categories (PPP, percent)&quot;) Tab. Poverty Incidence in Small Farm Households across Categories (PPP, percent) Variable LoCHiD est. std. err. LoCLoD est. std. err. LoCMeD est. std. err. MeCHiD est. std. err. MeCLoD est. std. err. MeCMeD est. std. err. pcexp_ppp_m Mean 39.74 3.09 29.66 3.03 26.57 3.74 33.47 39.74 32.67 29.66 39.65 26.57 Q25 14.63 3.89 13.24 3.06 12.62 6.01 15.65 7.48 13.65 0.97 22.97 6.67 Q50 26.23 14.63 26.38 13.24 36.65 12.62 44.00 15.65 38.61 13.65 30.77 22.97 Q75 1.18 26.23 0.36 26.38 2.32 36.65 2.60 44.00 2.32 38.61 3.79 30.77 foodexp_ppp_m Mean 24.12 2.50 23.04 1.91 18.85 2.25 24.69 24.12 24.02 23.04 27.27 18.85 Q25 9.92 2.26 10.34 2.45 8.04 3.91 11.74 5.09 10.91 0.75 16.19 4.21 Q50 19.51 9.92 18.49 10.34 26.33 8.04 27.28 11.74 30.37 10.91 24.28 16.19 Q75 0.83 19.51 0.31 18.49 0.83 26.33 1.43 27.28 1.45 30.37 1.79 24.28 nfoodexp_ppp_m Mean 15.62 0.89 6.62 1.40 7.72 3.06 8.78 15.62 8.65 6.62 12.38 7.72 Q25 3.94 0.89 2.17 0.85 3.73 0.99 3.95 2.30 2.33 0.33 4.78 2.21 Q50 7.01 3.94 5.15 2.17 6.91 3.73 13.89 3.95 7.77 2.33 10.00 4.78 Q75 0.31 7.01 0.06 5.15 0.78 6.91 0.56 13.89 0.40 7.77 0.99 10.00 (poor_ppp1 * 100) Mean 71.27 6.88 74.29 6.03 80.77 10.27 64.24 71.27 68.38 74.29 51.81 80.77 Q25 0.00 0.00 0.00 0.00 100.00 25.51 0.00 0.00 0.00 0.00 0.00 0.00 Q50 100.00 0.00 100.00 0.00 37.37 100.00 100.00 0.00 100.00 0.00 100.00 0.00 Q75 25.51 100.00 25.51 100.00 0.00 37.37 25.51 100.00 25.51 100.00 0.00 100.00 (poor_ppp2 * 100) Mean 82.53 4.11 90.64 5.30 93.03 6.11 91.04 82.53 86.07 90.64 89.86 93.03 Q25 100.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 Q50 100.00 100.00 100.00 100.00 100.00 100.00 100.00 100.00 100.00 100.00 100.00 100.00 Q75 0.00 100.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 100.00 0.00 100.00 (povgap_ppp1 * 100) Mean 34.32 4.03 38.34 4.13 39.48 4.06 30.62 34.32 33.70 38.34 17.54 39.48 Q25 0.00 10.15 0.00 7.70 17.26 9.19 0.00 3.07 0.00 0.93 0.00 11.61 Q50 30.47 0.00 29.56 0.00 0.04 17.26 61.00 0.00 65.17 0.00 64.13 0.00 Q75 3.52 30.47 0.96 29.56 7.56 0.04 0.69 61.00 4.29 65.17 0.00 64.13 (povgap_ppp2 * 100) Mean 50.46 3.64 55.34 4.20 57.82 4.77 50.02 50.46 50.43 55.34 38.55 57.82 Q25 26.39 6.34 36.43 4.81 48.29 10.46 31.68 1.92 27.26 0.58 18.46 7.25 Q50 56.54 26.39 55.97 36.43 35.35 48.29 75.63 31.68 78.23 27.26 77.58 18.46 Q75 11.61 56.54 1.59 55.97 13.44 35.35 6.56 75.63 12.08 78.23 7.77 77.58 (sevpov_ppp1 * 100) Mean 19.63 2.91 23.59 3.39 23.23 1.92 17.94 19.63 20.58 23.59 7.67 23.23 Q25 0.00 4.28 0.00 5.01 2.99 3.31 0.00 3.56 0.00 1.22 0.00 13.99 Q50 9.29 0.00 8.74 0.00 0.00 2.99 37.21 0.00 42.47 0.00 41.15 0.00 Q75 0.49 9.29 0.04 8.74 2.24 0.00 0.02 37.21 0.72 42.47 0.00 41.15 (sevpov_ppp2 * 100) Mean 34.40 3.41 38.59 3.77 39.80 3.58 32.42 34.40 34.47 38.59 20.45 39.80 Q25 6.96 6.43 13.27 5.57 23.32 8.27 10.04 2.83 7.43 0.91 3.41 10.90 Q50 31.97 6.96 31.33 13.27 12.52 23.32 57.19 10.04 61.20 7.43 60.20 3.41 Q75 5.28 31.97 1.16 31.33 7.97 12.52 3.15 57.19 5.72 61.20 2.37 60.20 3.2 Ethiopia Revelant sources of household-level micro records for Ethiopia include: 2011/12 ERSS (income vars) 2013/14 and 2015/16 Ethiopia Socioeconomic Surveys 2012/13 Ethiopia’s Agricultural Sample Survey (AgSS) – but it’s difficult to cross-tabulate results from the AgSS (crop production and input uses) with the ERSS’ income data 2012 ATA Baseline Survey (3,000 hhlds), see (Minot &amp; Sawyer, 2013). # Load and copy constructed vars from the 2015 ETH Segmentation setwd(&quot;~/Google Drive/2016-BMGF-Segmentation/ETH&quot;) e1 &lt;- new.env() load(&quot;./temp/eth-erss-11_bmgf_seg.RData&quot;, envir=e1) names(e1) erss &lt;- e1$hh erss.lbl &lt;- e1$hh.lb e1 &lt;- new.env() # Seems more recent load(&quot;./temp/eth_bmgf_seg.RData&quot;, envir=e1) names(e1) erss2 &lt;- e1$hh erss2.lbl &lt;- e1$hh.lb rm(e1) setwd(&quot;~/Projects/2017-agra-aasr&quot;) # Differences between the 2 set of ERSS vars? names(erss2)[!names(erss2) %in% names(erss)] # =&gt; merged in all seg vars, poverty, expendc, real_totcons, livestock, eff names(erss)[!names(erss) %in% names(erss2)] # [1] &quot;hhid&quot; &quot;input_12&quot; # Merge in `input_12` and keep `erss2` only setkey(erss, household_id) setkey(erss2, household_id) erss[!erss2][, .(household_id, hhid)] erss2[erss][, .(household_id, hhid)] References "],
["quadrant-classification.html", "4 Quadrant Classification 4.1 Nigeria 4.2 Ethiopia", " 4 Quadrant Classification 4.1 Nigeria [TBD] For documentation purposes below are code snippets from the 2016 Farmer Segmentation for Nigeria (definitions and characterization of quadrants and livelihood zones). ##################################################################################### # 2016.05.03 Quadrant Definitions across Livelihood Zones (from Diemuth 2016.04.06) ##################################################################################### # We need to add a new segment vars to all key micro datasets, starting with GHS. # Diemuth provided latest quadrant definitions. # # - [country]_agpotallclass_1km.tif – Agricultural potential raster with 1km cell # resolution and same extent as ethtt_1km100khr. Created from clipping sub-Saharan Africa # Agricultural Potential 5 minute grid vector layer from FAO &amp; IIASA, 2007. For the # 2x2 segmented data, 5-6 values were considered high, 1-4 low and -809-0 were # unsuitable and -997 were water. # -997 = Water # -809 = Protected Areas # -807 = Urban Areas # -805 = Irrigated Areas # -801 = Forest # 0 = Land not suited for agriculture # 1 = Land very poorly suited for pasture and at best poorly suited for rainfed crops # 2 = Land poorly suited for pasture and at best poorly suited for rainfed crops # 3 = Lands suited for pasture and at best poorly suited for rainfed crops # 4 = Land suited for rainfed crops and pasture possible # 5 = Land well suited for rainfed crops and pasture possible # 6 = Prime land suited for rainfed crops and pasture possible # # - [country]_tt1km100khr_4hr.tif – Classified travel time raster with a 4 hr threshold, # HarvestChoice, 2015 # 100 – travel time greater than 4 hours, lo access # 200 – travel time less than or equal to 4 hours, high access # Load the 2 rasters and classify LGAs qd.agpot &lt;- raster(&quot;./maps/quadrant/nga_agpotallclass_1km.tif&quot;) qd.tt100k &lt;- raster(&quot;./maps/quadrant/nga_tt1km100khr_4hr.tif&quot;) proj4string(qd.agpot) proj4string(qd.tt100k) proj4string(geo12.pts) unique(qd.agpot) # [1] -997 -809 -807 -805 -801 0 1 2 3 4 5 6 summary(qd.tt100k) # nga_tt1km100khr_4hr # Min. 100 # 1st Qu. 100 # Median 200 # 3rd Qu. 200 # Max. 200 # NA&#39;s 0 # Note that raster tt100k is already classified. qd.agpot.lbl &lt;- c( &quot;water&quot;, &quot;protected area&quot;, &quot;urban area&quot;, &quot;irrigated area&quot;, &quot;forest&quot;, &quot;land not suited for agriculture&quot;, &quot;land very poorly suited for pasture and at best poorly suited for rainfed crops&quot;, &quot;land poorly suited for pasture and at best poorly suited for rainfed crops&quot;, &quot;land suited for pasture and at best poorly suited for rainfed crops&quot;, &quot;land suited for rainfed crops and pasture possible &quot;, &quot;land well suited for rainfed crops and pasture possible&quot;, &quot;prime land suited for rainfed crops and pasture possible&quot;) qd.agpot.lbl &lt;- data.table(varCode=unique(qd.agpot), varLabel=qd.agpot.lbl) # Intersect with GHS coords tmp &lt;- extract(qd.agpot, geo12.pts) tmp &lt;- data.table(hhid=geo12.pts$hhid, qd.agpot=tmp) tmp[, qd.agpot := factor(qd.agpot, levels=qd.agpot.lbl$varCode, labels=qd.agpot.lbl$varLabel)] tmp1 &lt;- extract(qd.tt100k, geo12.pts) tmp[, qd.tt100k := tmp1] tmp[, qd.tt100k := factor(qd.tt100k, levels=c(100, 200), labels=c(&quot;ML&quot;, &quot;MH&quot;))] setkey(tmp, hhid) setkey(geo12, hhid) geo12 &lt;- tmp[geo12] rm(tmp, tmp1) # Classify hhlds across quadrants # Rename old segment var to avoid confusion setnames(geo12, c(&quot;qd.agpot&quot;, &quot;qd.tt100k&quot;), c(&quot;qd_agpot&quot;, &quot;qd_tt100k&quot;)) setnames(geo12, &quot;seg_quad&quot;, &quot;seg_quad_old&quot;) setnames(ghs, &quot;seg_quad&quot;, &quot;seg_quad_old&quot;) setnames(ppp12, &quot;seg_quad&quot;, &quot;seg_quad_old&quot;) setnames(inc12, &quot;seg_quad&quot;, &quot;seg_quad_old&quot;) setnames(farm, &quot;seg_quad&quot;, &quot;seg_quad_old&quot;) geo12[qd_agpot %in% qd.agpot.lbl$varLabel[1:6], qd_agpot_clas := &quot;AU&quot;] geo12[qd_agpot %in% qd.agpot.lbl$varLabel[7:10], qd_agpot_clas := &quot;AL&quot;] geo12[qd_agpot %in% qd.agpot.lbl$varLabel[11:12], qd_agpot_clas := &quot;AH&quot;] summary(factor(geo12$qd_agpot_clas)) # AH AL AU NA&#39;s # 1968 1490 1323 117 summary(factor(geo12$qd_tt100k)) # ML MH NA&#39;s # 750 4051 97 # Impute missing hhld coords with LGA means # Compute LGA means from `g2` map (using dominant class) geo12[is.na(qd_agpot_clas), .N, by=.(adm1_nm, adm2_nm)] # =&gt; missing records in 58 LGAs tmp &lt;- geo12[!is.na(qd_agpot_clas), .( qd_agpot_clas=modal(qd_agpot_clas, na.rm=T), qd_tt100k=modal(qd_tt100k, na.rm=T) ), keyby=.(adm1_nm, adm2_nm)] setnames(tmp, 3:4, c(&quot;qd_agpot_clas_imp&quot;, &quot;qd_tt100k_imp&quot;)) setkey(geo12, adm1_nm, adm2_nm) geo12 &lt;- tmp[geo12] geo12[is.na(qd_agpot_clas), qd_agpot_clas := qd_agpot_clas_imp] geo12[is.na(qd_tt100k), qd_tt100k := qd_tt100k_imp] geo12[is.na(qd_agpot_clas), .N, by=.(adm1_nm, adm2_nm)] # adm1_nm adm2_nm N # 1: Rivers Bonny 10 geo12[is.na(qd_tt100k), .N, by=.(adm1_nm, adm2_nm)] # Empty data.table (0 rows) of 3 cols: adm1_nm,adm2_nm,N # =&gt; only 10 missing records in Bonny # What is the dominant agpot in Bonny? Extract all LGAs for re-use. tmp &lt;- extract(qd.agpot, g2, fun=modal, na.rm=T) g2$qd_agpot &lt;- tmp # Note that we already have median 100k travel time across LGAs in `g2$mkt100k` # though I&#39;m not sure it&#39;s the same source as Diemuth/Stan # load Joe&#39;s latest travel times tt100k &lt;- dt[, .SD, .SDcols=c(&quot;CELL5M&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;tt10_100k&quot;)] rm(dt) tt100k &lt;- SpatialPixelsDataFrame(tt100k[, .(X,Y)], data.frame(tt100k)) proj4string(tt100k) &lt;- CRS(&quot;+init=epsg:4326&quot;) tt100k &lt;- raster(tt100k, layer=&quot;tt10_100k&quot;) tmp &lt;- extract(tt100k, g2, fun=median, na.rm=T) g2$qd_tt100k &lt;- tmp # Export for mapping tt100k &lt;- crop(tt100k, g2) tt100k &lt;- mask(tt100k, g2) writeRaster(tt100k, &quot;./maps/markets/tt100k.tif&quot;) rm(tmp) # What is Bonny? g2[g2$adm2_nm==&quot;Bonny&quot;, &quot;qd_agpot&quot;] # =&gt; -997, so AU geo12[is.na(qd_agpot_clas), qd_agpot_clas := &quot;AU&quot;] summary(factor(geo12$qd_agpot_clas)) # AH AL AU # 1997 1530 1371 # Make final quadrant classification for GHS geo12[, seg_quad := paste0(qd_tt100k, qd_agpot_clas)] geo12[, unique(seg_quad)] # [1] &quot;MHAU&quot; &quot;MHAL&quot; &quot;MHAH&quot; &quot;MLAH&quot; &quot;MLAL&quot; &quot;MLAU&quot; geo12[, seg_quad := ordered(seg_quad, levels=c(&quot;MLAU&quot;, &quot;MLAL&quot;, &quot;MLAH&quot;, &quot;MHAU&quot;, &quot;MHAL&quot;, &quot;MHAH&quot;))] # Merge quadrants into `ghs`, `farm` and `ppp12` setkey(geo12, hhid) setkey(ghs, hhid) setkey(farm, hhid) setkey(ppp12, hhid) ghs$seg_quad &lt;- geo12[ghs][, seg_quad] farm$seg_quad &lt;- geo12[farm][, seg_quad] ppp12$seg_quad &lt;- geo12[ppp12][, seg_quad] # Re-run summary tables # =&gt; done ##################################################################################### # Crop preferences across quadrants/zones - GHS ##################################################################################### # Note that Cleo generated the hh-level vars and Eduardo estimated state-level vars ghs.plot &lt;- read.dta(&quot;./data/NGA-GHS/NGA_GHS_Indicator_plot_2012.dta&quot;) ghs.plot &lt;- data.table(ghs.plot) # Merge in segmentation vars setkey(geo12, hhid) setkey(ghs.crop, hhid) setkey(ghs.plot, hhid) ghs.crop$seg_quad &lt;- geo12[ghs.crop][, seg_quad] ghs.plot$seg_quad &lt;- geo12[ghs.plot][, seg_quad] ghs.crop$seg_lvl_6 &lt;- geo12[ghs.crop][, seg_lvl_6] ghs.plot$seg_lvl_6 &lt;- geo12[ghs.plot][, seg_lvl_6] # Share of female plot managers tmp &lt;- ghs.plot[, .N, by=.(hhid, wt_w2v1, manager, state, gender)] tmp &lt;- ghs.crop[, .( num_fem_mgr=sum(num_fem_mgr*wt_wave2, na.rm=T)/sum(num_hh_mgr*wt_wave2, na.rm=T), fem_mgr=weighted.mean(num_fem_mgr&gt;0, wt_wave2, na.rm=T), fem_earn=weighted.mean(fem_earn, wt_wave2, na.rm=T) ), keyby=seg_lvl_6] tmp &lt;- ghs.crop[, .( num_fem_mgr=sum(num_fem_mgr*wt_wave2, na.rm=T)/sum(num_hh_mgr*wt_wave2, na.rm=T), fem_mgr=weighted.mean(num_fem_mgr&gt;0, wt_wave2, na.rm=T), fem_earn=weighted.mean(fem_earn, wt_wave2, na.rm=T) ), keyby=seg_quad] tmp &lt;- ghs.crop[, .( num_fem_mgr=sum(num_fem_mgr*wt_wave2, na.rm=T)/sum(num_hh_mgr*wt_wave2, na.rm=T), fem_mgr=weighted.mean(num_fem_mgr&gt;0, wt_wave2, na.rm=T), fem_earn=weighted.mean(fem_earn, wt_wave2, na.rm=T))] # Share of female-managed plots tmp &lt;- ghs.plot[, .(femplotmgr=weighted.mean(gender==&quot;female&quot;, wt_w2v1, na.rm=T)), keyby=seg_lvl_6] tmp &lt;- ghs.plot[, .(femplotmgr=weighted.mean(gender==&quot;female&quot;, wt_w2v1, na.rm=T)), keyby=seg_quad] tmp &lt;- ghs.plot[, .(femplotmgr=weighted.mean(gender==&quot;female&quot;, wt_w2v1, na.rm=T))] # TODO Area of female-managed plots under each crop tmp &lt;- ghs.plot[, lapply(.SD, sum, na.rm=T), keyby=.(hhid, wt_w2v1, state, gender), .SDcols=96:147] tmp &lt;- tmp[, lapply(.SD, function(x) sum(x*wt_w2v1, na.rm=T)), keyby=.(state, gender), .SDcols=c(2, 5:56)] tmp[, wt_w2v1 := NULL] tmp &lt;- melt(tmp, id.vars=1:2) tmp[, variable := str_replace(variable, &quot;area_&quot;, &quot;&quot;)] tmp &lt;- tmp[!is.na(gender)] # Proportion of female-managed plots by crop tmp &lt;- melt(ghs.plot, id.vars=c(&quot;seg_quad&quot;, &quot;seg_lvl_6&quot;, &quot;gender&quot;, &quot;wt_w2v1&quot;), measure.vars=11:147) tmp[value==&quot;yes&quot;, value := &quot;1&quot;] tmp[value==&quot;no&quot;, value := &quot;0&quot;] tmp[, value := as.numeric(value)] tmp &lt;- tmp[, lapply(.SD, weighted.mean, wt_w2v1), keyby=.(seg_lvl_6, gender, variable)] # TODO Additional production stats # TODO Also check on Sara&#39;s harmonized farm management stats 4.2 Ethiopia [TBD] "],
["references.html", "References", " References Note that some of these references are unpublished materials, do not cite. "]
]
